#: import AKCircularProgress akivymd.uix.progresswidget
#:include force Power_App_KVs/meter_reading_details.kv
# import AKBadgeLayout akivymd.uix.akbadgelayout
<Meter_reading_screen>:
    MDBoxLayout:
        size_hint_y: 0.94
        orientation: "vertical"
        MDCard:
            size_hint: 1,.06
            orientation: "horizontal"
            spacing: "5dp"
            padding: "10dp"
            MDLabel:
                text: "Sept Cycle"
                font_size: "12dp"
                halign: "left"
            MDLabel:
                size_hint: .3,1
                text: "BU"

        MDCard:
            padding_x: 0
            spacing: 5
            size_hint: 1,.1
            orientation: "horizontal"
            AnchorLayout:
			    pos_hint: {'center_x': .5, 'center_y': .24}
				size_hint: (1, None)
				height: dp(30)
				width: dp(200)
                TextInput:
                    padding: ["1dp","8dp"]
                    pos_hint: {'left': .5, 'top': .24}
                    text: "Transformer name"
                    font_size: "12dp"
                    multiline: False
                    on_text: reading_progress_percent.current_percent = len(self.text)
                MDLabel:
                    padding: ["12dp","12dp"]
                    text: "Change"
                    font_size: "10dp"
                    halign: "right"

            AKCircularProgress:
                id: reading_progress_percent
                pos_hint: {"center_x": .5, "center_y": .5}
                size_hint: None, None
                size: dp(40), dp(40)
                percent_size: dp(7)
                line_width: dp(2)
                percent_type: "relative"
                start_deg: 180
                end_deg: 540
                max_percent: 2000#len(grid_id.children*10)

        Screen:
            ScrollView:
                do_scroll_y: True
                MDGridLayout:
                    id: grid_id
                    md_bg_color: [.7]+app.theme_cls.primary_light[1:3]+[.4]
                    padding: 3
                    spacing: 5
                    size_hint: 1,None
                    height: app.meter_screen_sizer(self.parent.height, len(self.children))
                    cols: 1
                    #the upload function should work in a way that will change the color of the meters to read
                    #to white when read but should be at yellow before read, it should also change the color to green if the upload is successful
                    #
                    #
                    Meters_to_read:
                    Meters_to_read:
                    Meters_to_read:
                    Meters_to_read:
                    Meters_to_read:
                    Meters_to_read:
                    Meters_to_read:
                    Meters_to_read:
                    Meters_to_read:
                    Meters_to_read:
            MDCard:
                id: bottom_tab
                md_bg_color: [.6]+app.theme_cls.primary_light[1:3]+[0]
                size_hint: 1, .1
                orientation: "horizontal"
                spacing: 5
                padding: 5
                MDBoxLayout:
                    orientation: "horizontal"
                    padding:[5,5] if root.width < root.height else [15,15]
                    spacing: 5 if root.width < root.height else 15
                    Button:
                        text: "Upload All"
                        font_size: "9dp"
                        icon: "upload-multiple"
                        pos_hint: {"bottom":1, "left": .5}
                        #size_hint_x: .2
                        size_hint: .3, 1
                        background_color: app.theme_cls.primary_dark

                    Button:
                        pos_hint: {"center_x": .5}
                        font_size: "9dp"
                        text: "Manual Input"
                        icon: "animation"
                        on_release: app.change_screen_1('Meter reading page')
                        size_hint: .3,1
                        size: 70, 30
                        background_color: app.theme_cls.primary_dark

                    Button:
                        pos_hint: {"center_x": .5}
                        font_size: "9dp"
                        text: "Show all read"
                        icon: "animation"
                        on_release: app.manual_meter_reading(), print(app.theme_cls.primary_light)
                        #size_hint_x: .2
                        size_hint: .3,1
                        background_color: app.theme_cls.primary_dark

<manual_reading_dialog@MDCard>:
    MDGridLayout:
        cols: 2
        padding: 10
        MDLabel:
            text: "Enter Account here:"
        MDTextField:
            font_size: "12dp"
        MDLabel:
            text: "Enter Reading:"
        MDTextField:
            font_size: "12dp"
    MDGridLayout:
        cols: 2
        padding: 15
        spacing: 20
        MDFillRoundFlatButton:
            text: "Cancel"
        MDFillRoundFlatButton:
            text: "Save"

